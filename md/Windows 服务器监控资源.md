> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [www.cnblogs.com](https://www.cnblogs.com/longronglang/p/12860006.html)

操作步骤  
1、运行程序 perfmon.exe

 ![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203814841-891366465.png)

2、选择【用户自定义】-【新建】-【数据收集器集】

 ![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203826061-1173041530.png)

3、自定义名称 “test”，选择【手动创建】，然后【下一步】

 ![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203837567-695922259.png)

4、选择 “性能计数器”，【下一步】

 ![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203848920-593319148.png)

5、用户可以根据具体情况，选择多长时间记录一次，然后点击【添加】选择需要记录的性能指标值

 ![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203900480-1995354022.png)

6、选择需要收集性能指标的计数器，点击【添加】；注：计数器通过路径添加，可以参考文章结尾 {关键指标}

 ![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203910350-573942614.png)

7、【下一步】

 **![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203921524-314458482.png)**

8、选择保存数据的位置，【下一步】

 ![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203929596-1674827470.png)

9、打开属性

 **![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203940281-1156092861.png)**

10、日志选择 “逗号分隔”

 ![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509203951106-1719227499.png)

11、最后一步开始任务

 ![](https://img2020.cnblogs.com/blog/718867/202005/718867-20200509204010909-966040617.png)

 关键指标
-----

1、CPU 监控  
Processor Time

地址

\processor(_Total)\% Idle Tile

描述

% Processor Time 指处理器用来执行非闲置线程时间的百分比。计算方法是，度量处理器用来执行空闲线程的时间，然后用 100% 减去该值。(每个处理器有一个空闲线程，该线程在没有其他线程可以运行时消耗周期)。此计数器是处理器活动的主要指示器，显示在采样间隔期间所观察的繁忙时间平均百分比。应注意，对处理器是否空闲的计算是在系统时钟的内部采样间隔期间 (10ms) 执行的。考虑到现在的处理器速度非常快，因此，在处理器可能会用大量时间为系统时钟采样间隔之间的线程提供服务时，% Processor Time 会低估处理器利用率。当恰好进行采样后即向计时器发出信号时，更可能对应用程序做出不准确地度量，基于工作负荷的计时器应用程序是一个这样的示例。

建议指标

该监控内容不宜超过 80%

说明

过高说明 CPU 资源即将耗尽，应增加 CPU 资源或实施分布式策略

2、内存监控  
Available Mbytes

地址

\Memory\Available MBytes

描述

Available MBytes 指能立刻分配给一个进程或系统使用的物理内存数量，以 MB 为单位表示。它等于分配给待机 (缓存的)、空闲和零分页列表内存的总和。

建议指标

该值不宜低于 400

一般要保留 10% 的可用内存，假设系统有 8G 内存，则该值最好不要低于 800

说明

过高说明内存资源即将耗尽，应考虑增加内存

3、Pages/sec  
地址

\Memory\Pages/sec

描述

Pages/sec 是指为解决硬页错误从磁盘读取或写入磁盘的速度。这个计数器是可以显示导致系统范围延缓类型错误的主要指示器。它是 Memory\\Pages Input/sec 和 Memory\\Pages Output/sec 的总和。是用页数计算的，以便在不用做转换的情况下就可以同其他页计数如: Memory\\Page Faults/sec 做比较，这个值包括为满足错误而在文件系统缓存 (通常由应用程序请求) 的非缓存映射内存文件中检索的页。

建议指标

该值不宜超过 20

说明

此值过高，说明内存中有很多东西需要与硬盘交换，应考虑增加内存或更换内存

4、磁盘监控  
Disk Time

地址

\PhysicalDisk(_Total)\% Disk Time

描述

Disk Time 指所选磁盘驱动器忙于为读或写入请求提供服务所用的时间的百分比。

建议指标

此值不宜超过 10

说明

此值过高，说明硬盘响应效率较低，应换用更高性能的硬盘

5、ASP.NET 监控  
Request Wait Time

地址

\ASP.NET\Request Wait Time

描述

最近的请求在队列中等待的毫秒数。

建议指标

此值不宜超过 10000

说明

此值过高说明 IIS 已经无法承受更多的请求，应考虑实施分布式策略

  
————————————————  
版权声明：本文为 CSDN 博主「@Joy.Chen」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。  
原文链接：https://blog.csdn.net/qq_41650233/java/article/details/84313153